@rendermode InteractiveServer
@implements IDisposable
@inject AiPanelState PanelState

<button class="cc-ai-toggle @(PanelState.IsOpen ? "cc-ai-toggle--active" : "")"
        title="Toggle AI Assistant"
        @onclick="PanelState.Toggle">
    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M12 2a8 8 0 0 0-8 8c0 3.4 2.1 6.3 5 7.5V20h6v-2.5c2.9-1.2 5-4.1 5-7.5a8 8 0 0 0-8-8z"/>
        <line x1="10" y1="22" x2="14" y2="22"/>
    </svg>
</button>

@code {
    protected override void OnInitialized()
    {
        PanelState.OnToggle += StateHasChanged;
    }

    public void Dispose()
    {
        PanelState.OnToggle -= StateHasChanged;
    }
}
